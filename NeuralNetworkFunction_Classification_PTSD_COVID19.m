function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 07-May-2020 17:24:39.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 16xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.272272011;-0.37005737;-0.232881314;-0.298427858;-0.421498194;-0.326070982;-0.113655409;-0.073705196;-0.36406593;-0.21820532;-0.35878303;0.02757931;-0.088311585;-0.223611717;-0.126672276;0.351947562];
x1_step1.gain = [2.21542583975597;1.87258998137544;2.08280473701737;1.9464420868794;2.41498537256642;2.89379751124472;2.78012133125059;2.4173645912499;2.54381608415252;2.92909587984118;2.19125183331359;2.61807015663281;2.40414922690807;2.49528996863302;3.25510213456659;3.99642824021744];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6729965397564829921;1.7270650072924751406;-1.6701505949118857774;1.5618802257691872803;1.3095827589126662893;1.190210969967656629;-1.3649852440378886786;-0.98148911607066413598;0.84748321046448971128;0.73874719114712117385;0.46456806710619580336;0.59195089518501053938;-0.29284357582060815961;-0.38127998203395269128;-0.23714076948233009379;-0.086222793038179146308;0.030126686294299823837;-0.026787525961702252086;0.21964615063686962482;0.39569236081410896766;-0.3537785323475405308;0.60304311247398145746;0.58927148180825894563;0.77383261682136483817;0.83529556940955096422;0.8986123357201121209;1.0342626637616323393;1.1719284506049156835;-1.3869566956392924695;1.4093848060283253876;-1.5309127245203373313;1.633280692695426195;1.9541449311120524523];
IW1_1 = [0.59502908310604485376 -0.62053644266099727833 0.52830652819357137862 0.55540075142656852858 0.10168270925506486813 -0.54658003043501290907 -0.40790330161230720085 -0.41845385864717343782 -0.49594022315585556404 -0.19420886952399618597 0.31638500208057213081 0.5821489963409862689 0.31447286403689683754 0.4043539082231599191 -0.35028158279049126378 -0.21814641981279342398;-0.45154687208128130305 0.031519166848434893025 0.56467055766617613166 -0.12007785512756281865 0.51562397264235115824 0.41539791269998765921 0.054903941869206829285 -0.11232447538116122066 0.53121074783352040249 -0.44181527825631716766 -0.097032315949276803924 -0.6857403864237160418 -0.67302144086376791687 -0.49251794955810929144 0.21876475759161104206 0.36330457009919059352;0.70242708615078319756 -0.14033591421846225433 0.30567551587170982419 -0.3412468679581442399 -0.57645773787190568438 -0.7292786363045671294 0.27681763400202191727 -0.26094231238747112034 -0.051535234236075255776 0.28277418284502581214 -0.52138283157710230142 -0.30048433806883600994 -0.37964576270108352229 0.26770447277622244631 0.40789061889341909906 0.46502076674523684652;-0.45650184606392874009 0.11078806791011430732 -0.63007992241793753241 0.13597656753908932137 -0.34060923136295467861 -0.21250290735593674318 0.18854670479750537671 0.54008540399093563078 0.52218236433311637779 0.68020875125850155385 -0.49376757335292897899 0.16996159896624246644 0.017823694979632216662 -0.6907692222882395594 -0.0088508778871825288803 -0.13094062133156431083;-0.059644562436379264247 0.14761295337841690012 0.01960507846771488219 -0.22773175284627994452 0.31109473759108430269 -0.32138903008666108718 -0.44542995013427860718 0.41557538505166213838 -0.34519153136001878845 0.66948402737643664118 0.49106869958000182175 -0.76103821314463571124 0.65409615172375601411 -0.39265938089643986908 -0.31548181785723128367 -0.56617388574311244831;-0.25971645824169353745 -0.59853949570325903906 0.14273951000661216915 0.3112498197197077765 -0.023962362419663818525 0.25152143909213414696 -0.33102141754879538249 0.75143998809124357141 0.4509941564378953105 0.22043303676558356763 -0.45777414064723043197 -0.54587803282616709222 0.013002513852857458532 0.67519739576641701895 0.43916691532969109879 -0.69351443454331507255;0.12139156060946255933 0.6679034837411677028 -0.53025004890381777223 0.30393764318475680053 -0.21546910824654313954 0.15876879176337535537 -0.38283959475177076204 -0.22515403757734320234 -0.47853140656480752657 0.51835173115179400405 0.22633388874925888801 -0.38352240906248635799 -0.65403570284274847868 0.39508605976825150741 0.19235310310010250712 0.19344188185368219046;0.59578446639812221441 0.72628009012527428023 -0.17638674509232277199 -0.24871241179510863994 -0.72616925266090204261 0.33890974240370580484 -0.33221952575786817263 0.38773486022166375742 -0.45858539984559509861 0.58759306804508271149 0.1423928382017519978 0.57664539994363717135 0.46997831279277968441 -0.018352655223948216578 -0.15328175500341095772 0.053590259432137361817;-0.32406748591783801627 -0.36075287440814407525 0.49747393611783746747 0.68858908520330475156 -0.31114031661470176182 -0.45600270193556646792 -0.058015197615512464901 -0.61579290388053287142 0.4771313333785814903 0.4859875183302408419 -0.38362964104469010618 0.58453143372843785475 0.31091865855394085205 -0.19736397384302811764 -0.6294818989928824271 -0.15555663968931707219;-0.31154057104097931941 -0.55824468865222653946 0.40423424530259538523 -0.19314034082820147331 -0.10978055344132556237 0.67106407435085257962 0.21889472425447342729 0.6328595757782947695 0.26776404623750343914 -0.38646390947841124941 0.41326577410597409301 -0.67635741900228263379 0.010323791071370398004 -0.36551894399180617778 -0.61623119737139453456 0.37986030918392965638;-0.63611644765981734118 0.72542210881290236646 -0.41114546258470036078 -0.5111477231793699616 0.20308127862079813908 -0.27908646396590525152 0.27385589017320277616 0.22540395163218238106 0.62811656740309618208 0.1997222355164788854 0.46491570008753319021 -0.31570444627403476678 -0.67920599763654787573 -0.28071570137650680987 0.44088422122056181163 -0.4483271323204239267;-0.54667383851569562037 -0.16336601451896237691 -0.21220511598609653747 -0.66882596392871573876 -0.46622440297553691124 0.013153923304136356381 0.39059310031267679975 -0.4598276245733282086 0.17663112550967074998 -0.48036736265587864914 0.20169399883711325305 0.19094632647089646027 0.93857591522450478649 0.44787376839639891912 -0.011995909439596580404 -0.3121188259615812477;0.49249606902621612115 0.38692276005677317396 0.37474898965516423299 -0.11766991196142648213 0.48387074837797772187 -0.69158737777376744216 0.59631237404603842922 0.42381748298297672317 0.090397275865577331189 -0.19554221878605909657 0.54707799381748223322 0.77225342379292560846 -0.31861320558924582924 -0.26160263411029222036 0.29323027909968696347 0.42398895447170498185;0.53507358426594986422 0.6034529950159404077 -0.25178388307660104495 0.54728397263143202522 0.55978052597589122996 0.50474035937344097213 0.60866292399425625526 -0.030734706558036863772 0.40768144917803011973 0.34647344232518578755 0.018862688725152523816 0.66342356802254354164 0.5052059781162783203 0.45763270257175475697 -0.033694624150677171537 -0.076866532721923203075;0.21744469952702846771 0.61614136340991854102 0.1915329428401620071 0.17584058310733621799 0.63339967252373696738 -0.46289055369697690301 -0.57192878828877857789 0.59603360684656092605 0.63846065337988511246 0.3338238647899286482 0.50180815770429521017 0.26977829356835469898 -0.099172496181282848715 0.073996032927602928275 0.54310950888696352123 -0.17487226746873485439;0.048341823628071232954 0.56149635012730270134 -0.63865087210559434716 -0.32343416325457280402 0.051345908968001244266 -0.57000679951205845963 0.016903265525871635083 -0.27008654813337995559 0.50556738754950081294 -0.31351443854178068227 -0.56796181109873589143 0.58545072548392462775 -0.52793049735758579288 -0.53763685152260110023 -0.33670634835718843414 -0.29049763000917272482;0.30974332204243193445 -0.34547121562458721344 0.27273837481999074761 -0.26555519359327184326 -0.2759252988648323579 -0.13010948923647333575 -0.74830561118426963674 0.091801368252214562982 0.46927472337041920003 0.41084199924375519597 0.55405124307629549651 -0.21159168335686903695 -0.59561182322629346864 -0.73328919344595522301 -0.55846199514011418685 0.14890312617363463121;-0.60434476056306163372 0.13863964457337546454 0.33526112745618197319 -0.14125671387814950353 0.30493992037360190261 0.7412276291591058941 0.29277368100349571156 -0.37324859226844875337 0.24590030586107125554 0.53011419300778495067 -0.49126022451821144132 -0.40313613951169252614 -0.099334666017007564043 0.58052782561190729993 -0.38564457026386478322 0.50859529449277118829;0.59384318373548272696 0.58586986757635350909 0.25845461838231176266 0.60813320893402877942 0.010948497895674948882 -0.44709641636311348023 -0.29321060679573035523 -0.55181424198321915586 -0.15020830358608747157 0.48264570040471549417 -0.49048507788649692296 0.091887161606134998282 0.050258246525318059361 0.13450150993240919672 -0.59524141512203854187 -0.64676169358170609858;0.28521687941877216232 0.53436564948601827929 -0.25793047564045812337 0.04071367059045525455 0.15832606143419297728 -0.31231602009997783131 -0.45067043700490538871 -0.3955630750398793638 -0.70879156372569640521 0.68540584727393083497 0.37540598223367671604 0.068705630071299275685 -0.17433257769334822851 0.7187551909403667727 0.34515579713353833347 -0.49683352449985984656;-0.56654414092700156047 0.5273379993591154058 -0.075201714178719458737 0.21424125156028583916 0.27676325897422004996 0.017042963882407044518 -0.54165376199990544759 -0.26445756742195408728 -0.50025995873941941916 -0.70588507276520562339 -0.4847101152003918112 -0.39227716450143546023 -0.84301918384316643085 -0.062044506673860314039 0.11146319398523472921 0.058520563162369323984;-0.01309987759633184437 -0.52475423427803269405 -0.24328033376519647701 0.36000319757060433856 -0.48144285257055141614 0.11988666598021602283 -0.47508525557170777631 0.4229723271837196874 -0.65420704317583666665 0.33573541818624347277 0.29982512367017299937 0.46023238539454341955 0.19107584921768272501 0.6609978817741992696 0.42336110791952347165 0.53105742674068301401;0.067291756565651894562 0.7713905678021910628 -0.37356326828084202019 -0.25818846158963587589 0.36694554272539686712 -0.24802589298134758433 -0.47872502866461508209 -0.8099469501135246885 -0.17873390384373646911 0.45120533006484520033 0.63780756928079795909 0.63456316316962102508 -0.25935090274670935528 0.15161465662526332765 -0.20785330376702709776 -0.35472280910723097413;0.22096881687620334445 0.1975448462377841774 0.42566155063683830395 -0.46136795044866618642 -0.36631131448047504762 0.31734247380649621695 0.53567660169253417113 0.31425760614187092656 0.68925870054757532035 0.44025006474843675353 -0.47602636054108704577 0.24156656633812395585 0.27846600439817925654 -0.48580716278182944912 0.69342064678801529354 -0.3566977902867505823;0.69417211124093058938 0.11909459957845133782 0.15477845436937315293 0.43742297636261706639 -0.39901196569389468793 -0.5877659386175344558 0.3910200436691022019 -0.38099622404039862333 -0.30205718377479756631 -0.022910161515479150751 0.34243517892165015182 0.36893170651413603744 -0.52577353673989857263 -0.59205431936047780983 0.23988465739538888943 -0.69661180678895473495;0.071995987712215506193 0.38628036007555943687 0.080632388080141226272 -0.65169172695532584516 -0.26411709167822283728 -0.64394382460014432112 0.41228481369630093356 0.50925734469251926484 0.57374679476486645235 -0.15396373284844061535 0.13687521791568904583 -0.33209705380558235399 0.17782702919441623068 -0.51421542032799349986 0.60998555052101932628 -0.69330803448220301721;0.11808925609869294626 -0.056921239926708284973 0.75951691662719267306 -0.62123386914994926933 -0.48702350511979120018 -0.62686281966343826433 -0.31832766055520644866 0.092861702433228651699 -0.46812890970275322644 -0.63095612695585401308 0.11929636628534318055 -0.63222496816647377749 -0.16537604020453267051 0.43736027582117903423 -0.080169616166350002318 0.066358741089118905565;0.66750214257446305322 0.57838155282781700262 0.42114379245169947241 -0.28381467709156626977 -0.39532217102460914804 0.084842290728934052768 -0.59489367782991930955 -0.029799538869940384034 -0.29525008234666483276 -0.078471520575996350777 0.74554018922699449856 -0.56922468244229285084 0.25592248433659020579 -0.54153440725885415574 -0.14620267564328034982 0.48578241116672171707;-0.63719325379143776367 -0.42229481334093399436 0.15194306075880528728 0.46921983704811404126 -0.47525136065039230715 0.53267823263024982605 -0.57083790231813813509 -0.48938840104838893241 -0.10146207784025083887 -0.4466632649902454455 -0.44813873936058651326 0.22534344142883766526 -0.45264656534780073338 -0.4029871263309756646 -0.044941763693492481346 -0.26845997525243159298;0.32444298989627778917 0.38580841877173033261 0.63741865326400859448 0.055509241375308680799 0.34322110815253625837 0.21044017911434986789 -0.36189061544155698424 -0.41751450206418194711 -0.53178514594401204985 -0.47131301268953978978 -0.55482256134630725253 -0.32691824059394347657 0.87542352569291093101 -0.13035144389063235693 0.0054322734162261937518 -0.32563215890364349825;-0.75734081576616385512 0.11738316095941583872 0.12478897612011606577 -0.44535494627973032378 -0.47221343943472776639 0.047946686797469689756 0.25603175013887341516 -0.31941035651707583298 0.51759171528707748067 -0.21774574504798308028 0.30045777419098179672 0.32199216366673577561 -0.68218441191125489542 -0.34791251745342166579 -0.028820961907074636732 -0.8635492207094753736;0.17023613226472680826 0.031419241121315152898 -0.64353835970395578681 -0.06928304590053369072 -0.38184005837803125516 0.211714580028808802 0.19729495573334643321 0.7276274819998894694 -0.40623227247127452477 0.64647357249735348805 0.36013380037095499286 0.42936358022742415752 -0.62369914846453577972 -0.060500503069211668261 0.70062282725503255421 -0.16590838137310137679;0.49978371441572905232 -0.53592773114880398744 0.041349103745345845706 0.10670239034370235243 0.17935793744163916474 -0.076150206441915849198 -0.0056051142328614467214 0.098451313852033567331 0.52471925422076881596 -0.39416152240148494279 -0.27744963511048958971 0.46740672383864612094 0.35919682551005233107 -0.71447766677442314798 0.3863521729611248956 0.68031450426211992344];

% Layer 2
b2 = -0.17699316291526187572;
LW2_1 = [-0.67305699146284947432 -0.77449975439330343008 0.74581954036254860529 -0.94286763100422077422 -0.29824410166079640128 0.41451525710235992417 0.59994854581330292476 0.11889499639269636433 0.53547239813221447768 0.018906316523681618302 0.46307486268284908659 -0.20341093218343381244 -0.55280989368508426374 0.50429421868642232418 0.3494681456863815705 0.059773836111668199322 -0.24219214300599728462 -0.45035258980568421139 -0.102760070328967279 -0.30254968341474069993 -0.049859247747626345149 0.36457140944416677186 0.26056161652815634788 -0.079376780010227326878 -0.034423118159612187128 0.018410776906895492955 0.72824382780927920944 0.34926463163659493549 0.40637134948072772822 0.44752595338876260955 -0.72262206345654034223 -0.17176858389453852904 0.52931863430837089446];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.1;
y1_step1.xoffset = 50;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
